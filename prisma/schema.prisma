generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  directUrl  = env("DIRECT_URL")
  extensions = [vector]
}

model DocumentSection {
  id        String                       @id
  content   String
  embedding Unsupported("vector(1536)")?
  metadata  Json?
  source    String

  @@index([source])
}

model Lead {
  id             Int      @id @default(autoincrement())
  email          String   @unique
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @default(now()) @updatedAt @map("updated_at")
  userAgent      String?  @map("user_agent")
  monthlyVolume  String?  @map("monthly_volume")
  currentProcess String?  @map("current_process")
  primaryFormats String?  @map("primary_formats")
  role           String?
  tier           String?
  source         String?  @default("web")
  companyName    String?  @map("company_name")
  status         String?  @default("new")

  @@map("leads")
}

model AuditRecord {
  id        String   @id @default(uuid()) @db.Uuid
  userId    String
  score     Int
  findings  Json     @db.JsonB
  createdAt DateTime @default(now())

  @@index([userId])
}
